    <link rel="preconnect" href="https://fonts.googleapis.com">

    <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Last.fm Enhanced Widget</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap" rel="stylesheet">
    
</head>
<body>

    <div class="widget-container">
        <div class="lastfm-widget" id="lastfm-widget">
            <div class="widget__header">
                <nav class="widget__tabs">
                    <button class="widget__tab-button active" data-type="recent">Currently Listening</button>
                    <button class="widget__tab-button" data-type="track">Top Track</button>
                    <button class="widget__tab-button" data-type="album">Top Album</button>
                    <button class="widget__tab-button" data-type="artist">Top Artist</button>
                </nav>
                <button class="widget__grayscale-toggle" aria-label="Toggle Grayscale Artwork">
                    <svg xmlns="http://www.w3.org/2000/svg" height="16" viewBox="0 -960 960 960" width="16" fill="currentColor"><path d="M480-80q-11 0-21-2t-19-6q-12-7-20.5-16t-14.5-22q-12-23-18-47.5T420-220q0-43 3-86t11-83q-93-25-156.5-92.5T214-552q-1 2-1 3.5t-1 3.5q-10 25-22.5 48t-28.5 43q-7 8-15.5 13.5T128-436q-15 0-25.5-10.5T92-472q0-13 8-23.5t21-18.5q38-21 67.5-51T230-632q-3-10-5-20t-3.5-20.5T220-692q-1-4-1-8t-1-8q-14-52-21-105.5T190-920h580q0 50-7 103.5T751-711q-1 4-1 8t-1 8q-1.5 10.5-3.5 20.5T740-652q42 67 71.5 97.5T879-494q13 8 21 18.5t8 23.5q0 15-10.5 25.5T872-416q-10 0-18.5-5.5T839-435q-16-19-28.5-43T288-526q0-1 0-1.5t-1-1.5q0-77 47-132t118-69q8 40 11 83t3 86q0 25-6 49.5T522-172q-6 16-14.5 25T487-137q-10 7-20 11t-19 4.5T420-116q0 20 18 34t42 14q24 0 42-14t18-34q-4 0-8.5-.5T484-128q-11-3-21-10t-16.5-17.5T438-178q-5.5-10.5-9-22t-5.5-24q-7-20-10.5-41T410-306q-77 13-128.5 64T230-128q66 50 140 79t154 29q78 0 150-29t136-79q-28 55-69 95.5T544-12q-9 5-19 8t-21 4.5T480-0ZM240-170q-3 0-5.5-1t-4.5-3q-16-19-28.5-43T179-278q-1-2-1-3.5t-1-3.5q0-77 47-132t118-69q8 40 11 83t3 86q0 25-6 49.5T444-172q-6 16-14.5 25T409-137q-10 7-20 11t-19 4.5T346-116q0 20 18 34t42 14h14q-43-15-79-41t-61-57Zm240-210q66 0 113-47t47-113q0-66-47-113t-113-47q-66 0-113 47t-47 113q0 66 47 113t113 47ZM720-170q-25 31-61 57t-79 41h14q24 0 42-14t18-34q-4 0-8.5-.5T684-128q-11-3-21-10t-16.5-17.5T638-178q-5.5-10.5-9-22t-5.5-24q-7-20-10.5-41T510-306q-77 13-128.5 64T330-128q66 50 140 79t154 29q78 0 150-29t136-79q-28 55-69 95.5T544-12q-9 5-19 8t-21 4.5T480-0q66 0 113-47t47-113q0-66-47-113t-113-47q-66 0-113 47t-47 113q0 66 47 113t113 47Z"></path></svg>
                </button>
            </div>
            <div class="widget__body">
                <div class="widget__artwork-container">
                    <img src="placeholder.png" alt="Album Art" class="widget__artwork" id="widget-artwork">
                     <div class="widget__loading-overlay" id="widget-loading">
                        Loading...
                    </div>
                </div>
                <div class="widget__info">
                    <div class="widget__title" id="widget-title">Loading...</div>
                    <div class="widget__subtitle" id="widget-subtitle">Please wait</div>
                    <div class="widget__playcount" id="widget-playcount"></div> </div>
            </div>
             </div>
    </div>
<script type="application/javascript" charset="utf-8" src="js/script.js"></script>
  <script>
        // Wait for the HTML document to be fully loaded and parsed
        document.addEventListener('DOMContentLoaded', (event) => {

            // --- Configuration ---
 // --- Configuration ---
        const lastFmApiKey = ''; // IMPORTANT: Replace with your Last.fm API key
        const lastFmUsername = 'deadflowers00'; // Replace with your Last.fm username
        
        // You can safely ignore anything that states Tidal at present time
            // const tidalApiKey = 'PASTE_YOUR_TIDAL_SDK_KEY_HERE'; // Placeholder

            // --- Initialization (Now safe to run) ---
            try { // consider try...catch for initialization errors
                const widgetInstance = new LastFmTidalWidget('lastfm-widget', {
                    apiKey: lastFmApiKey,
                    username: lastFmUsername,
                    initialType: 'recent'
                    // tidalKey: tidalApiKey
                });

                 // --- Example Programmatic Control (also inside the listener) ---
                // setTimeout(() => {
                //     console.log("Switching tab via code...");
                //     widgetInstance.setType('album');
                // }, 5000);

                // setTimeout(() => {
                //     console.log("Toggling grayscale via code...");
                //     widgetInstance.toggleGrayscale();
                // }, 8000);

            } catch (error) {
                console.error("Error initializing widget:", error);
                // Optionally display an error message to the user on the page
            }
        });
    </script>      
    </body>
</html>
